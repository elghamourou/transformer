<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="MWBLibraries_2_files/filelist.xml">
<title>Home</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Don Creaven</o:Author>
  <o:LastAuthor>Don Creaven</o:LastAuthor>
  <o:Revision>3</o:Revision>
  <o:TotalTime>31</o:TotalTime>
  <o:Created>2007-05-08T16:02:00Z</o:Created>
  <o:LastSaved>2007-05-08T17:28:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>2504</o:Words>
  <o:Characters>14279</o:Characters>
  <o:Company>Department of Veterans Affairs</o:Company>
  <o:Lines>118</o:Lines>
  <o:Paragraphs>33</o:Paragraphs>
  <o:CharactersWithSpaces>16750</o:CharactersWithSpaces>
  <o:Version>11.8122</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:DisplayBackgroundShape/>
  <w:TrackRevisions/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:UseWord2002TableStyleRules/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	font-size:24.0pt;
	font-family:"Times New Roman";}
h2
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:2;
	font-size:18.0pt;
	font-family:"Times New Roman";}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoSubtitle, li.MsoSubtitle, div.MsoSubtitle
	{mso-margin-top-alt:auto;
	margin-right:0in;
	mso-margin-bottom-alt:auto;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
ins
	{mso-style-type:export-only;
	text-decoration:none;}
span.msoIns
	{mso-style-type:export-only;
	mso-style-name:"";
	text-decoration:underline;
	text-underline:single;}
span.msoDel
	{mso-style-type:export-only;
	mso-style-name:"";
	text-decoration:line-through;
	color:red;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:1205169162;
	mso-list-type:hybrid;
	mso-list-template-ids:37415902 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l0:level1
	{mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level2
	{mso-level-tab-stop:1.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level3
	{mso-level-tab-stop:1.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level4
	{mso-level-tab-stop:2.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level5
	{mso-level-tab-stop:2.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level6
	{mso-level-tab-stop:3.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level7
	{mso-level-tab-stop:3.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level8
	{mso-level-tab-stop:4.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level9
	{mso-level-tab-stop:4.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l1
	{mso-list-id:1429233953;
	mso-list-template-ids:-521524342;}
@list l1:level1
	{mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l1:level2
	{mso-level-tab-stop:1.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l1:level3
	{mso-level-tab-stop:1.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l1:level4
	{mso-level-tab-stop:2.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l1:level5
	{mso-level-tab-stop:2.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l1:level6
	{mso-level-tab-stop:3.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l1:level7
	{mso-level-tab-stop:3.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l1:level8
	{mso-level-tab-stop:4.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l1:level9
	{mso-level-tab-stop:4.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l2
	{mso-list-id:1483622443;
	mso-list-template-ids:-1268059544;}
@list l2:level1
	{mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l2:level2
	{mso-level-tab-stop:1.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l2:level3
	{mso-level-tab-stop:1.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l2:level4
	{mso-level-tab-stop:2.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l2:level5
	{mso-level-tab-stop:2.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l2:level6
	{mso-level-tab-stop:3.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l2:level7
	{mso-level-tab-stop:3.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l2:level8
	{mso-level-tab-stop:4.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l2:level9
	{mso-level-tab-stop:4.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]-->
</head>

<body lang=EN-US link=blue vlink=purple style='tab-interval:.5in'>

<div class=Section1>

<p class=MsoTitle align=center style='text-align:center'><b><a
href="../../../../../Program%20Files/Messaging%20Workbench/Help/Default.htm">Home</a></b></p>

<p class=MsoTitle align=center style='text-align:center'><b><span
style='font-size:13.5pt'>Working with MWB Segment Libraries</span></b></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>&nbsp;
</p>

<h2>Using and Associating Libraries with Segments</h2>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>The
Messaging Workbench actually employs 3 different types of library files:
Segment Libraries also referred to as Conformance Libraries or just libraries
are the ones we’ll be concerned with here. The other 2 are the Data Type
libraries and the Table Library, which will be discussed elsewhere.&nbsp; </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>The
Segment libraries (referred to simply as libraries or library from now on) are
collections of segment definitions that are derived from message
specifications. Message specifications are complete in that they do not need to
refer to library files outside of themselves. Libraries come into play is when
you create a new message specification from scratch, or add a new segment to
and existing specification. When a new segment is added to a specification, the
MWB message compiler looks for the segment definition in the currently active
conformance library, and adds it to the message specification.&nbsp; </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>Libraries
are used when a Profile Consistency Check is done.<span
style='mso-spacerun:yes'>  </span>The library active for a particular segment
is used as the standard against which that segment is checked.</p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>Libraries
are additive, so for any given message specification you can define one or more
associated libraries. When a new segment is introduced into a specification,
the MWB message compiler will search through the list of libraries until it
encounters a library in the list with a definition for that segment. You can
view the currently active list of libraries using the 'Show Lib/Datatype
Libraries in use' option on the Maint/Libraries menu.<span
style='mso-spacerun:yes'>  </span>It is important to realize that the first
segment definition encountered will be compiled into the specification and that
library definition remains associated with that segment.<span
style='mso-spacerun:yes'>  </span>So for example if your library list contained
2 libraries each of which contained a PID definition, then only the first PID
definition encountered would be used. The list of libraries and their order for
a specification can easily be arranged to suit your needs in the Select
Conformance Spec option available as a button on the tool bar, or under the
Maint/Libraries menu.</p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>The
primary intent of this feature is to allow developers to keep custom library
definitions separate from standard libraries, but to bring them together as
circumstances require. So for example, you may work primarily with the HL7
2.3.1 library, but you need to incorporate your own custom Z segments into a
particular specification. In this instance, you might have a library list
consisting of 2 libraries, one for the standard and one for the corporate Z
segment library. There is however no requirement that standard and custom
segments be sequestered into different library files. You may elect to put all
of your segment definitions into one library file. We’ll describe how to do
this in library maintenance below.&nbsp; </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>The
library list that you select by the way is saved as part of the application
start-up parameters, so if you work with the same library or list of libraries
most of the time, you’ll seldom have use the <b>Select Conformance Files</b>
option. This convenience however has a downside in that people often forget to
select the appropriate library for a given specification. For example, if as
above you ordinarily work with the HL7 2.3.1 library, but for a particular
interface you’re required to conform to HL7 2.2, you must remember to select
the appropriate Hl7 2.2 library before you compile your new message
specification, or add segments to an existing one.</p>

<h1>&nbsp;<span style='font-size:12.0pt;mso-bidi-font-size:24.0pt'>Changing the
Library Associated with a Segment</span> </h1>

<p class=MsoNormal>You may want to change library associated with a segment
after a segment has been compiled into a message specification.<span
style='mso-spacerun:yes'>  </span>Here's how you can:</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:
-.25in;mso-list:l0 level1 lfo2;mso-list-change:"%1\:1\:0\:\." "Don Creaven" 20070508T0900;
tab-stops:list .5in'><![if !supportLists]><span style='mso-list:Ignore'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><![endif]>With
the message specification loaded, right click in the box containing the Message
Tree.</p>

<p class=MsoNormal style='margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:
-.25in;mso-list:l0 level1 lfo2;mso-list-change:"%1\:2\:0\:\." "Don Creaven" 20070508T0900;
tab-stops:list .5in'><![if !supportLists]><span style='mso-list:Ignore'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><![endif]>Select
'Assign Seg Lib' from the menu.<span style='mso-spacerun:yes'>  </span>The
dialog will show the current library to segment association.</p>

<p class=MsoNormal style='margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:
-.25in;mso-list:l0 level1 lfo2;mso-list-change:"%1\:3\:0\:\." "Don Creaven" 20070508T0900;
tab-stops:list .5in'><![if !supportLists]><span style='mso-list:Ignore'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><![endif]>Use
the Select Segment Library button to choose the Library you want to be the new
assignment.</p>

<p class=MsoNormal style='margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:
-.25in;mso-list:l0 level1 lfo2;mso-list-change:"%1\:4\:0\:\." "Don Creaven" 20070508T0900;
tab-stops:list .5in'><![if !supportLists]><span style='mso-list:Ignore'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><![endif]>In
the Message Tree, select the segments you want to assign to that library.</p>

<p class=MsoNormal style='margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:
-.25in;mso-list:l0 level1 lfo2;mso-list-change:"%1\:5\:0\:\." "Don Creaven" 20070508T0900;
tab-stops:list .5in'><![if !supportLists]><span style='mso-list:Ignore'>5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><![endif]>Press
the Assign button.<span style='mso-spacerun:yes'>  </span>This will change the
assignment for the selectd segments.<span style='mso-spacerun:yes'> 
</span>When you are done, Close the dialog box.</p>

<h2>Creating and Maintaining Segment Libraries</h2>

<h1><span style='font-size:12.0pt'>Create a new library</span></h1>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>The
MWB is delivered with a set of libraries for each version of the standard.
Before making modifications to them, it would be a good idea to make back-up
copies. To start with though, we’ll create a new library. Follow these steps:</p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l1 level1 lfo4;
mso-list-change:"%1\:1\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>Bring up the MWB and start a new specification (<b>File/new</b>).
Click on the <b>Books</b> icon on the tool bar (or click on <b>Maint/Libraries/Select
Conformance Files</b>). Remove any files in the <b>Prioritized Conformance
Files</b> list using the left arrow. Then select the <b>HL7 2-3-1.mcf</b> file
and click the right arrow to include it on the list. Click OK. </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l1 level1 lfo4;
mso-list-change:"%1\:2\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>In the <b>Structure</b> field of the main MWB screen,
enter <b><i>ZZZ</i></b> right after the <b>MSH,</b>. Press Enter or click on
the <b>Gear</b> icon to compile the message. </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l1 level1 lfo4;
mso-list-change:"%1\:3\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>Notice that the message tree has a top-level node of <b>MSH</b>,
followed by <b><i>ZZZ. </i></b>Expand the <b>MSH</b> node by clicking the ‘<b>+</b>’
to the left of it and notice the list of fields that were added to the tree by
the compiler from the library.<b><i> </i></b>Expand the <b><i>ZZZ</i></b> node
in the same way and notice that it has one child element – <b>Set ID</b>. This is
how the MWB installs segments that it can find no definition for in the
selected library list. Since <b><i>ZZZ</i></b> is not in the HL7 2-3-1 library
it adds a stub segment to the specification. </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l1 level1 lfo4;
mso-list-change:"%1\:4\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>Select the <b>Set ID</b> element in the tree with the mouse,
and then click on the Add Field (<b>F+</b>) button on the tool bar. In the Add
Field dialog that pops up, enter a field name of ‘<b><i>z stuff</i></b>’,
select a data type of <b>CE</b> from the drop-down list, and click <b>OK</b>.
Click the <b>Close</b> button on the Field Add form. </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l1 level1 lfo4;
mso-list-change:"%1\:5\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>Just for purposes of illustration, select the <b>ZZZ</b>
segment in the tree, click on the Add Segment tool bar button (<b>S+</b>).
Enter <b>PID</b> and click the <b>ADD</b> button. Click the <b>Close</b> button
on the Add Segment form after the segment appears on the tree. Select the <b>PID</b>
segment on the tree. In the ‘<b>Element Name</b>’ field to the right, change
the segment name to <b><i>ZPD</i></b>. Select the <b>Patient ID</b> Field
(ZPD-2) and change its data type to <b>ST</b> by selecting the data type in the
dropdown list to the right (ignore the warning about data linkage – click <b>OK</b>).
Select the <b>Patient Identifier List</b> field (ZPD-3) and click on the <b>Delete
an Element</b> icon (left pointing arrow to right of <b>G+</b>) on the tool bar
to delete this element from the segment.<br>
<br>
Note that we have just used 2 different methods to create custom segments. In
the first method (<b><i>ZZZ</i></b>), we created one entirely from scratch. In
the second method, we created one (<b><i>ZPD</i></b>) by modifying a standard
segment (<b>PID</b>). </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l1 level1 lfo4;
mso-list-change:"%1\:6\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>6.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>In the <b>Specification</b> field above the <b>Message
Tree</b>, enter ‘<b><i>Test Spec</i></b>’. In the Message Type filed enter ‘<b><i>ZZZ</i></b>’;
do the same for the <b>Event Type</b> field. Click the <b>Save </b>button on
the tool bar (<b>diskette</b>) or use the <b>File/Save</b> menu option, and
save the new ‘<b><i>Test Spec-ZZZ_ZZZ</i></b>’ specification to Projects
directory (note that the MWB automatically affixes the Message and Event type
to the name – you may change the name before filing if you desire). Select <b>File/Close</b>
after the specification is saved.<br>
<br>
<b>We have just created a new specification that we’ll use in the steps below
to create a new segment library.<br>
<br style='mso-special-character:line-break'>
<![if !supportLineBreakNewLine]><br style='mso-special-character:line-break'>
<![endif]></b></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l1 level1 lfo4;
mso-list-change:"%1\:7\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>7.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>Select <b>Maint/Libraries/ New Library File</b>. In the
dialog that appears, click on the <b>Add Spec</b> button, navigate to the
application <b>/Projects</b> directory and select the ‘<b>Test Spec-ZZZ_ZZZ.mwb</b>’
file that you just created. The selected file appears on the Source
Specifications list. Note that you could add other specification files to this
list if appropriate to your project. </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l1 level1 lfo4;
mso-list-change:"%1\:8\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>8.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>Next, click on the ‘<b>Attach DT</b>’ button, navigate
to the <b>DT2-3-1.mdf</b> file and select it. This step attaches a data type
file to the library. You will seldom have to use the <b>Force Data Type
re-compile</b>, and can ignore it here. Data Type file use and maintenance are
discussed elsewhere. </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l1 level1 lfo4;
mso-list-change:"%1\:9\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>9.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>Click on the ‘<b>Compile</b>’ button to create the new
library. This process may take a few moments. The time it takes to compile is
proportional to the size and number of specifications on the list. Wait for the
compile to complete before proceeding. </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l1 level1 lfo4;
mso-list-change:"%1\:10\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>10.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><![endif]>Click
on the <b>SaveAs</b> button. Name the File ‘<b><i>Test Lib</i></b>’ and save
into the application library directory <b>/Lib</b>. Click the ‘<b>Done</b>’ key
after the file is saved. </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l1 level1 lfo4;
mso-list-change:"%1\:11\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>11.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><![endif]>We
are going to add this new library file to the list of conformance files
following the procedure we used in step one. Click on the <b>Books</b> icon,
and in the dialog that appears; add the ‘<b>Test Lib.mcf</b>’ file to the list
right under the <b>HL72-3-1.mcf</b>. Click <b>OK</b> when done.<br>
<br>
<b>We have just created a new segment library file, which can be used alone or
in combination with others to create new message specifications.<br>
<br style='mso-special-character:line-break'>
<![if !supportLineBreakNewLine]><br style='mso-special-character:line-break'>
<![endif]></b></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l1 level1 lfo4;
mso-list-change:"%1\:12\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>12.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><![endif]>To
see our new library file in action, select <b>File/New</b> from the main menu.
In the structure field after the <b>MSH,</b> add the following: <b><i>EVN,ZPD,PV1,ZZZ</i></b>.
Press <b>Enter</b>, or click the <b>Gear</b> icon on the tool bar. Expand each
segment in turn. Notice that the ZPD-2 <b>Patient ID</b> has a data type of <b>ST</b>,
just as you re-defined it, and that the <b>Patient Identifier List</b> field no
longer exists. Notice too, that the <b>ZZZ</b> segment appears just as you
defined it. </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>&nbsp;
</p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>&nbsp;
</p>

<h1><span style='font-size:12.0pt'>Maintain Existing Libraries</span>&nbsp; </h1>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>Maintaining
a Segment Library is very similar to creating a new one. Through modification
to existing specifications or new specifications, you may add, remove or redefine
segment definitions. Basically, the procedure is to recompile the library under
the association of one or more specification files. Use the <b>Maint/Libraries/Edit
Library</b> <b>File</b> option on the <b>Main menu</b> for this purpose. This
option offers the ability <b>to overwrite existing segment definitions</b>, <b>Add
New segment definitions only</b>, or <b>Replace the entire library</b> with the
new compilation. We’ll work through an example where we add new segment
definitions only.</p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>&nbsp;
</p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>The
following procedure assumes that you have worked through the creation of the
new library file described above, that you have the last message that we
created in that procedure in the Message Tree(<b><i>MSH, EVN,ZPD,PV1,ZZZ)</i></b>,
and that you are using a library list consisting of the <b>HL72-3-1.mcf</b> and
the <b>Test Lib.mcf</b>.</p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>In
this exercise we will pretend that we are extending an existing message
specification, by adding another segment to it. We will want to use this new
segment in other messaging projects, so we’ll add it to the Test Lib library.
The procedure outlined below, will add the segment to the existing
specification. We’ll save the specification, and then we’ll edit the Test Lib
library file to add the new segment to it. Keep in mind that while we are only
adding one segment to the specification and thus to the library, we could add
any number of segments to both</p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l2 level1 lfo6;
mso-list-change:"%1\:1\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>With the message described above loaded, click on the <b>S+</b>
icon on the tool bar to add a Segment. In the <b>Add Segment</b> dialog, name
the segment ‘<b><i>ZXX</i></b>’, and click <b>OK</b> to add the segment to the
tree. <b>Close</b> the <b>Add Seg</b> Dialog. </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l2 level1 lfo6;
mso-list-change:"%1\:2\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>Expand the <b><i>ZXX</i></b> segment in the Message
Tree, and select the <b>Set ID</b> field. On the tool bar select the <b>F+</b>
icon to add a new field. In the <b>Add Field</b> dialog, name the field ‘<b><i>stuff</i></b>’’,
and give it a data type of <b>CE</b>. Press <b>OK</b> to add the field to the
tree. You should see the <i>‘<b>stuff</b></i>’ field together with its
components added right after the <b>Set ID</b> field in the tree. <b>Close</b>
the <b>Add Field</b> dialog. </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l2 level1 lfo6;
mso-list-change:"%1\:3\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>For purposes of illustration, expand the <b>MSH</b>
seg, and select the <b>Sending Application</b> field. Change its data type from
<b>HD</b> to <b>ST</b>. We’ll examine this after we modify the library file. </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l2 level1 lfo6;
mso-list-change:"%1\:4\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>Select <b>File/SaveAs</b> and save the new
specification as <b>Test Spec 2</b>. </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l2 level1 lfo6;
mso-list-change:"%1\:5\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>Select <b>Maint/Libraries/Edit Library</b> <b>File</b>
from the main menu. Navigate to the <b>Test Lib.mcf</b> file that you created
earlier and select it. You may get a warning that source message specifications
or constituent files cannot be found. <i>Ignore this warning</i> (its purpose
is currently deprecated and will most likely be removed in future versions). <span
style='mso-bidi-font-style:italic'>If you don’t get the warning, you may see
the source specifications list populated with one or more files. You may leave
them there if you want to re-compile them into the library, or remove them by
clicking on the <b>Delete Spec</b> button. </span></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l2 level1 lfo6;
mso-list-change:"%1\:6\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>6.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>Notice that on the left hand side of the form, you’ll
see a list of the <b>Constituent Segments</b> in this library. Note too, that
at the bottom of the form, the <b>Data type file</b> that you previously
associated with this library is displayed. Click on the <b>Add Spec</b> button,
navigate to the <b>Test Spec 2.mwb</b> specification that you just saved, and
select it. You should see it added to the <b>Source Specifications</b> list.
Note that if you had several specifications that you wanted to harvest segments
from for this library, you could add them as well. </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l2 level1 lfo6;
mso-list-change:"%1\:7\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>7.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>Examine the <b>Seg Actions</b> group of buttons. In
this example, we will only add new segments to the library. The application
defaults to the <b>Add New Only</b> option. This means, that the library
compiler will go through the source specification a segment at a time and if it
finds the segment already defined in the library, it will ignore the
specification definition. If on the other hand the compiler does not find a
specification segment in the library it will add it to the library. </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l2 level1 lfo6;
mso-list-change:"%1\:8\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>8.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>Click on the <b>Compile</b> button. When compilation is
complete, <b>Save</b> the file, then click <b>Done</b>. </p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto;
margin-left:.5in;text-indent:-.5in;mso-text-indent-alt:-.25in;mso-list:l2 level1 lfo6;
mso-list-change:"%1\:9\:0\:\." "Don Creaven" 20070504T1424;tab-stops:list .5in'><![if !supportLists]><span
style='mso-list:Ignore'>9.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>To confirm that the new segment has been added to the
library, select <b>File/New</b>, then add <b><i>ZPD,ZXX</i></b> after the <b>MSH</b>,
in the structure field. Press <b>return</b>. Expand each of the segments in
turn. Note particularly that the <b>ZXX</b> segment that we defined is now part
of the library. Examine the MSH-3<span style='mso-spacerun:yes'>  </span><b>Sending
Application</b> field. Not that the field has a data type of <b>HD</b>
indicating that the change we made to <b>ST</b> did not get compiled into the
new library definition. Since we selected the Add New Only option this is what
we should have expected. </p>

<h1><span style='font-size:12.0pt'>Notes on other library compilation options</span></h1>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>If
you want to make changes to existing segment definitions as well as add new
segments to a library, select the ‘<b>Overwrite Existing’ Seg</b> <b>Actions</b>
option in the <b>Maintain Specification Libraries</b> dialog. So for example if
you want to change field parameters for a segment or segments, you may create a
new message using those segments (with the object conformance library selected
of course), make the changes say to some fields data type, field lengths etc.
save the specification, then compile it into the object library just as
described above. In this instance however be sure to select the <b>Overwrite
Existing</b> option.</p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>&nbsp;If
you anticipate making changes to several segments in a library you may want to
use <b>Maint/Libraries/Rebuild Lib from Segs</b> option. This option reads the
currently selected conformance libraries and builds an HL7 abstract message
representing each of the constituent segments. It loads this abstract message
into the <b>Structure</b> field of the MWB. Click on the <b>Gear</b> icon to
compile the message and populate the tree. You can now go and make updates to
any or all of the segments in the library save it as a specification and
re-compile it into the library to capture changes. This feature is also handy
when used in conjunction with Data type maintenance utilities and HL7 version
upgrades. Data type maintenance will be discussed in another article.</p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>&nbsp;The
<b>Replace File option</b> of the <b>Library Compilation</b> utility will allow
you to recreate a library from scratch. It is used primarily for deleting
segments from an existing library, and may be used to create a new library for
an occasion like a version change. In either event, the <b>Maint/Libraries/Rebuild
Lib from Segs </b>option can be helpful. If you want to delete segments from a
library, use the option to load all of the segments into the message tree, then
use the <b>Delete</b> button on the tool bar (<b>arrow with '–' sign</b>) to
delete the unwanted segments. Save the resultant specification and compile it
into the existing library using the replace file option.</p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>The
MWB library utilities afford messaging developers and implementers the ability
to create custom libraries that may be used in a wide variety of projects.
Aside from the fact that you can inherit message elements from specifications
and other libraries, keep in mind that you may record implementation specific
notes and example values for the fields within your segment libraries. This
together with other features of the MWB can be very helpful in rapid messaging
application prototyping and development. Create corporate specific, partner
specific or version specific libraries that can be easily re-used or extended
to maximize your productivity.</p>

<p class=MsoNormal align=center style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:center'><b><a
href="../../../../../Program%20Files/Messaging%20Workbench/Help/Default.htm">Home</a></b></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

</div>

</body>

</html>
